<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
 
<mapper namespace="file">

	<insert id="insertFile" parameterType="fileVO" useGeneratedKeys="true" keyProperty="file_id">
		INSERT INTO TB_FILE (
			file_name, file_real_name, file_path, file_ext, file_content_type, file_size, regi_date
		) VALUES (
			#{file_name}, #{file_real_name}, #{file_path}, #{file_ext}, #{file_content_type}, #{file_size}, now()
		)
	</insert>

	<update id="updateFile" parameterType="fileVO">
		UPDATE TB_FILE 
		SET file_name = #{file_name},
			file_real_name = #{file_real_name},
			file_path = #{file_path},
			file_ext = #{file_ext},
			file_content_type = #{file_content_type}
		WHERE file_id = #{file_id}
	</update>
	
	<select id="selectFile" parameterType="long" resultType="fileVO">
		SELECT
			file_id, file_name, file_real_name, file_path, 
			file_ext, file_content_type, file_size, regi_date
		FROM TB_FILE
		WHERE file_id = #{file_id}
	</select>
	
	<select id="selectFileLastApp" resultType="fileVO">
		SELECT
			file_id, file_name, file_real_name, file_path, 
			file_ext, file_content_type, file_size, regi_date
		FROM TB_FILE
		WHERE file_ext = 'apk'
		ORDER BY file_id DESC limit 1
	</select>
</mapper>